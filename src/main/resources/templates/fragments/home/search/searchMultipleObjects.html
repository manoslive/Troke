<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
</head>
<body>
<div th:fragment="searchMultipleObjects">

    <!-- Section control de page (#, previous/next) -->
    <div class="paginationControl">
        <ul class="pagination">
            <li class="previous"><a style="cursor:pointer;"
                                    th:onclick="'javascript:changePage(\'minus1\');'">Précédente</a>
            </li>
            <th:block th:each="i : ${#numbers.sequence(1, numberofpage, 1)}">
                <li th:class="'page' + ${i}"><a
                        th:onclick="'javascript:changePage(\'' + ${i} + '\')'"
                        style="cursor:pointer;" th:text="${i.intValue()}"></a></li>
            </th:block>
            <li class="next"><a style="cursor:pointer;"
                                th:onclick="'javascript:changePage(\'plus1\');'">Suivante</a>
            </li>
        </ul>
        <ul class="items-per-page nav nav-tabs">
            <li class="disabledTab"><a>Par page: </a></li>
            <li class="npp10"><a data-toggle="tab" style="cursor:pointer;"
                                 th:onclick="'javascript:changePageResultsNumber(\'' + '10' + '\')'">10</a>
            </li>
            <li class="npp20"><a data-toggle="tab" style="cursor:pointer;"
                                 th:onclick="'javascript:changePageResultsNumber(\'' + '20' + '\')'">20</a>
            </li>
            <li class="npp30"><a data-toggle="tab" style="cursor:pointer;"
                                 th:onclick="'javascript:changePageResultsNumber(\'' + '30' + '\')'">30</a>
            </li>
        </ul>
    </div>
    <!-- /Fin control Page -->

    <!-- Ligne/Spacer -->
    <div class="or-spacer">
        <div class="mask"></div>
    </div>

    <!-- Affiche le nombre de résultats sur le nombre total de résultat -->
    <div class="row" id="login-container">
        <div class="span8 offset2">
            <th:block th:if="${objectList.size()} gt 1">
                <div style="color:white;"
                     th:text="${objectList.size()} + ' sur ' + ${totalobjetnumber.size()} + ' résultats affichés.'"
                     class="col-xs-6 col-centered col-min"></div>
            </th:block>
            <th:block th:if="${objectList.size()} eq 1">
                <div style="color:white;" th:text="'1 sur 1 résultat affiché.'"
                     class="col-xs-6 col-centered col-min"></div>
            </th:block>
        </div>
    </div>

    <!-- Div un item -->
    <div th:each="obj : ${objectList}" class="searchItem">
        <!-- L'image de l'item -->
        <div class="searchItemImage">
            <img th:if="${obj.getImage1()} ne null" th:src="'/uploaded-images/' + ${obj.getImage1()}"/>
            <img th:if="${obj.getImage1()} eq null" src="images/UnknownUser.png"/>
        </div>
        <!-- Description de l'item -->
        <div class="searchItemDescription">

            <p th:text="'Nom: '  + ${obj.getNameObject()}" style="text-decoration: underline;"/>
            <th:block th:if="${obj.getDescObject().length() lt 30}">
                <span th:text="'Description: '  + ${obj.getDescObject()}"/><br/>
            </th:block>
            <th:block th:if="${obj.getDescObject().length() ge 30}">
                <span th:text="'Description: '  + ${obj.getDescObject().substring(0,30)} + '  ...'"/><br/>
            </th:block>
            <span th:text="'Publié le: '  + ${obj.getCreationdate()}"/><br/>
            <span th:text="'Sous-catégorie: '  + ${obj.getSubCategoryName()}"></span><br/>
            <span th:text="'Utilisateur: '  + ${obj.getIduser()}"/>
        </div>
        <!-- Bar vertical de séparation -->
        <div class="searchVerticalBar right">
            <div class="barMask"></div>
        </div>
        <!-- Section côte de l'item -->
        <div class="searchItemQuality">
            <!-- QualitÃ© en Ã©toiles -->

                                           <span class="starRating">
                                            <input th:if="${obj.getQuality()} eq 5" type="checkbox"
                                                   name="rating" value="5" checked="checked"/>
                                            <input th:unless="${obj.getQuality()}" type="checkbox"
                                                   name="rating" value="5"/>
                                            <label style="cursor:pointer;">5</label>
                                            <input th:if="${obj.getQuality()} eq 4" type="checkbox"
                                                   name="rating" value="4" checked="checked"/>
                                               <input th:unless="${obj.getQuality()}" type="checkbox"
                                                      name="rating" value="4"/>
                                            <label style="cursor:pointer;">4</label>
                                            <input th:if="${obj.getQuality()} eq 3" type="checkbox"
                                                   name="rating" value="3" checked="checked"/>
                                               <input th:unless="${obj.getQuality()}" type="checkbox"
                                                      name="rating" value="3"/>
                                            <label style="cursor:pointer;">3</label>
                                            <input th:if="${obj.getQuality()} eq 2" type="checkbox"
                                                   name="rating" value="2" checked="checked"/>
                                                <input th:unless="${obj.getQuality()}" type="checkbox"
                                                       name="rating" value="2"/>
                                            <label style="cursor:pointer;">2</label>
                                            <input th:if="${obj.getQuality()} eq 1" type="checkbox"
                                                   name="rating" value="1" checked="checked"/>
                                               <input th:unless="${obj.getQuality()}" type="checkbox"
                                                      name="rating" value="1"/>
                                            <label style="cursor:pointer;">1</label>
                                            </span>

            <!-- Bouton lancer une Ã©change -->
            <button type="button" class="btn btn-info btn-troke btnBootPerso">
                <a th:href="${adrStartTrade + obj.getIdobject()}">
                    <img class="searchItem-img-troke" src="images/Logo-transparent.png"/>
                </a>
            </button>
        </div>
        <!-- Ligne/Spacer -->
        <div class="or-spacer">
            <div class="mask"></div>
        </div>
    </div>

    <!-- /Div un item -->

    <!-- Section control de page (#, previous/next) -->
    <div class="paginationControl">
        <ul class="pagination">
            <li class="previous"><a style="cursor:pointer;"
                                    th:onclick="'javascript:changePage(\'minus1\');'">Précédente</a>
            </li>
            <th:block th:each="i : ${#numbers.sequence(1, numberofpage, 1)}">
                <li th:class="'page' + ${i}"><a
                        th:onclick="'javascript:changePage(\'' + ${i} + '\')'"
                        style="cursor:pointer;" th:text="${i.intValue()}"></a></li>
            </th:block>
            <li class="next"><a style="cursor:pointer;"
                                th:onclick="'javascript:changePage(\'plus1\');'">Suivante</a>
            </li>
        </ul>
        <ul class="items-per-page nav nav-tabs">
            <li class="disabledTab"><a>Par page: </a></li>
            <li class="npp10"><a data-toggle="tab" style="cursor:pointer;"
                                 th:onclick="'javascript:changePageResultsNumber(\'' + '10' + '\')'">10</a>
            </li>
            <li class="npp20"><a data-toggle="tab" style="cursor:pointer;"
                                 th:onclick="'javascript:changePageResultsNumber(\'' + '20' + '\')'">20</a>
            </li>
            <li class="npp30"><a data-toggle="tab" style="cursor:pointer;"
                                 th:onclick="'javascript:changePageResultsNumber(\'' + '30' + '\')'">30</a>
            </li>
        </ul>
    </div>
    <!-- /Fin control Page -->

    <script type="text/javascript" th:inline="javascript">
        // Quand la page est chargée on met les elements de pagination
        // reçus à actifs
        $(document).ready(function () {
            if ([[${currentpage}]] == null) {
                var currentpageStart = 1;
                var numberperpageStart = 10;
            }
            else {
                var currentpageStart = [[${currentpage}]];
                var numberperpageStart = [[${numberperpage}]];
            }
            $('li.page' + currentpageStart).addClass('active');
            $('li.npp' + numberperpageStart).addClass('active');
        });
        // Lors d'un clique sur le nombre de résultats par page
        function changePageResultsNumber(resultsperpage) {

            var requestedpage = [[${currentpage}]];

            var getRequest = [[${adrGetRequest}]] + '&amp;page=' + requestedpage + '&amp;number=' + resultsperpage;
            location.href = decodeURIComponent(getRequest.split('&amp;').join('%26').trim());
        }

        // Lors d'un clique sur la barre de pagination
        function changePage(requestedpage) {
            if (requestedpage == null) {
                requestedpage = 1;
            }
            else if (requestedpage == 'plus1') {
                requestedpage = "plus" + $('ul.pagination li.active a').first().text();
            }
            else if (requestedpage == 'minus1') {
                requestedpage = "minus" + $('ul.pagination li.active a').first().text();
            }


            var resultsperpage = $('ul.items-per-page li.active a').first().text();

            var getRequest = [[${adrGetRequest}]] + '&amp;page=' + requestedpage + '&amp;number=' + resultsperpage;
            location.href = decodeURIComponent(getRequest.split('&amp;').join('%26').trim());
        }
    </script>
</div>
</body>
</html>